'use strict';

/*
console.log(document.querySelector('.message').textContent);

document.querySelector('.message').textContent = 'Correct numberðŸŽ‰';

console.log(document.querySelector('.message').textContent);

document.querySelector('.number').textContent = 13;

document.querySelector('.score').textContent = 10;

document.querySelector('.guess').value = 23;
console.log(document.querySelector('.guess').value);
*/

let secretNumber = Math.trunc(Math.random() * 20) + 1;
//Math.Random generates any number between 0 & 1 ( 0.4444 )
//*20 ensures that number is generated from 1 to 19 ( since, generated by Math.random will never cover 20)
//Math.truc ensures decimals are removed
//+1 ensures that 20 is covered as well

let score = 20; //can be done via DOM route as well
let highscore = 0;

const displayMessage = message =>
  (document.querySelector('.message').textContent = message);

document.querySelector('.check').addEventListener('click', function () {
  const guess = Number(document.querySelector('.guess').value);
  console.log(guess, typeof guess);

  //when input is empty
  if (!guess) {
    // document.querySelector('.message').textContent = 'â›” No Number';
    displayMessage('â›” No Number');
  }
  //when player wins
  else if (guess === secretNumber) {
    //document.querySelector('.message').textContent = 'Correct numberðŸŽ‰';
    displayMessage('Correct numberðŸŽ‰');
    document.querySelector('.number').textContent = secretNumber;

    document.querySelector('body').style.backgroundColor = '#60b347';

    document.querySelector('.number').style.width = '30rem';

    if (score > highscore) {
      highscore = score;
      document.querySelector('.highscore').textContent = highscore;
    }
  }
  //when guess is wrong
  else if (guess !== secretNumber) {
    if (score > 1) {
      // document.querySelector('.message').textContent =
      //   guess > secretNumber ? 'ðŸ“ˆ Too high' : 'ðŸ“‰ Too low';
      displayMessage(guess > secretNumber ? 'ðŸ“ˆ Too high' : 'ðŸ“‰ Too low');
      score--;
      document.querySelector('.score').textContent = score;
    } else {
      // document.querySelector('.message').textContent = 'You lost the gameðŸ’¥';
      displayMessage('You lost the gameðŸ’¥');
      document.querySelector('.score').textContent = 0;
    }
  } //combined below two conditions in one above
  //when guess is high
  // else if (guess > secretNumber) {
  //   if (score > 1) {
  //     document.querySelector('.message').textContent = 'ðŸ“ˆ Too high';
  //     score--;
  //     document.querySelector('.score').textContent = score;
  //   } else {
  //     document.querySelector('.message').textContent = 'You lost the gameðŸ’¥';
  //     document.querySelector('.score').textContent = 0;
  //   }
  // }
  // //when guess is low
  // else if (guess < secretNumber) {
  //   if (score > 1) {
  //     document.querySelector('.message').textContent = 'ðŸ“‰ Too low';
  //     score--;
  //     document.querySelector('.score').textContent = score;
  //   } else {
  //     document.querySelector('.message').textContent = 'You lost the gameðŸ’¥';
  //     document.querySelector('.score').textContent = 0;
  //   }
  // }
});

///////////////////////////////////////
// Coding Challenge #1

/* 
Implement a game rest functionality, so that the player can make a new guess! Here is how:

1. Select the element with the 'again' class and attach a click event handler
2. In the handler function, restore initial values of the score and secretNumber variables
3. Restore the initial conditions of the message, number, score and guess input field
4. Also restore the original background color (#222) and number width (15rem)

GOOD LUCK ðŸ˜€
*/

document.querySelector('.again').addEventListener('click', function () {
  secretNumber = Math.trunc(Math.random() * 20) + 1;
  score = 20;
  document.querySelector('.score').textContent = score;
  // document.querySelector('.message').textContent = 'Start guessing...';
  displayMessage('Start guessing...');
  document.querySelector('.number').textContent = '?';
  document.querySelector('body').style.backgroundColor = '#222';
  document.querySelector('.number').style.width = '15rem';
  document.querySelector('.guess').value = '';
});
